(this["webpackJsonptodo-recoil"]=this["webpackJsonptodo-recoil"]||[]).push([[0],{101:function(e,a,t){},102:function(e,a,t){},103:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),l=t(26),c=t.n(l),s=(t(53),t(12)),i=t(3),m=t(6),o=Object(m.atom)({key:"account",default:{},persistence_UNSTABLE:{type:"account"}});function u(){Object(m.useRecoilValue)(o);return n.a.createElement("div",null)}var d=t(2),p=t.n(d),E=t(8),g=t(5),h=t(13),f=t(19),b=t(17),N=t(22),v=t(21),w=t.n(v);t(98);function q(){var e=Object(i.g)(),a=Object(N.a)(),t=a.handleSubmit,l=a.register,c=a.errors,m=a.watch,o=Object(r.useState)(""),u=Object(g.a)(o,2),d=u[0],v=u[1],q=function(){var a=Object(E.a)(p.a.mark((function a(t){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w.a.post("http://localhost:5000/account",t).then((function(a){e.push("/login")})).catch((function(e){"Error"===e.response.data.status&&"email already registed"===e.response.data.message&&v("email is already registered")}));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return n.a.createElement("div",{className:"bg"},n.a.createElement("section",{className:"reg-left"},n.a.createElement("form",{className:"reg-form",onSubmit:t(q)},n.a.createElement("div",{className:"header"},n.a.createElement("h1",null,"Register"),n.a.createElement("hr",{width:"25%"}),n.a.createElement("h4",null,"Create account for free")),n.a.createElement("h3",{className:"err_msg"},d),n.a.createElement("div",{className:"reg-input"},n.a.createElement("input",{type:"text",name:"firstName",placeholder:"First Name",ref:l({required:"Required"})}),n.a.createElement(h.a,{icon:b.b})),c.firstName&&n.a.createElement("h5",{className:"err_msg"},"This is Required"),n.a.createElement("div",{className:"reg-input"},n.a.createElement("input",{type:"text",name:"lastName",placeholder:"Last Name",ref:l({required:"Required"})}),n.a.createElement(h.a,{icon:b.b})),c.lastName&&n.a.createElement("h5",{className:"err_msg"},"This is Required"),n.a.createElement("div",{className:"reg-input"},n.a.createElement("input",{type:"email",name:"email",placeholder:"Email",ref:l({required:"Required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"invalid email address"}})}),n.a.createElement(h.a,{icon:b.a})),c.email&&n.a.createElement("h5",{className:"err_msg"},"This is Required"),n.a.createElement("div",{className:"reg-input"},n.a.createElement("input",{type:"password",name:"password",placeholder:"Password",ref:l({required:"Required",minLength:6})}),n.a.createElement(h.a,{icon:f.a})),c.password&&"required"===c.password.type&&n.a.createElement("h5",{className:"err_msg"},"This is Required"),c.password&&"minLength"===c.password.type&&n.a.createElement("h5",{className:"err_msg"},"This field required min length 6"),n.a.createElement("div",{className:"reg-input"},n.a.createElement("input",{type:"password",name:"cf_password",placeholder:"Confirm password",ref:l({required:"Required",validate:function(e){return e===m("password")}})}),n.a.createElement(h.a,{icon:f.a})),c.cf_password&&"required"===c.cf_password.type&&n.a.createElement("h5",{className:"err_msg"},"This is Required"),c.cf_password&&"validate"===c.cf_password.type&&n.a.createElement("h5",{className:"err_msg"},"Passwords don't match"),n.a.createElement("div",{className:"reg-submit"},n.a.createElement("input",{type:"submit",value:"Register"}),n.a.createElement(s.b,{to:"/login"},"Already have an account ?")))),n.a.createElement("section",{className:"reg-right"}))}t(101);var R=t(14),y=t.n(R);function O(){var e=Object(N.a)(),a=e.handleSubmit,t=e.register,l=e.errors,c=Object(r.useState)(""),i=Object(g.a)(c,2),u=(i[0],i[1],Object(m.useRecoilState)(o)),d=Object(g.a)(u,2),v=(d[0],d[1]),q=new Date((new Date).getTime()+36e5),R=function(){var e=Object(E.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("http://localhost:5000/account/login",a).then((function(e){console.log(e),y.a.set("token",e.data.token,{expires:q}),v(e.data.account)})).catch((function(e){console.log(e.response)}));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:"bg"},n.a.createElement("section",{className:"login-left"}),n.a.createElement("section",{className:"login-right"},n.a.createElement("form",{className:"reg-form",onSubmit:a(R)},n.a.createElement("div",{className:"header"},n.a.createElement("h1",null,"Log in"),n.a.createElement("hr",{width:"25%"}),n.a.createElement("h4",null,'Work too much ? Let\'s "Split"')),n.a.createElement("div",{className:"reg-input"},n.a.createElement("input",{type:"email",name:"email",placeholder:"Email",ref:t({required:"Required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"invalid email address"}})}),n.a.createElement(h.a,{icon:b.a})),l.email&&n.a.createElement("h5",{className:"err_msg"},"This is Required"),n.a.createElement("div",{className:"reg-input"},n.a.createElement("input",{type:"password",name:"password",placeholder:"Password",ref:t({required:"Required",minLength:6})}),n.a.createElement(h.a,{icon:f.a})),l.password&&"required"===l.password.type&&n.a.createElement("h5",{className:"err_msg"},"This is Required"),l.password&&"minLength"===l.password.type&&n.a.createElement("h5",{className:"err_msg"},"This field required min length 6"),n.a.createElement("div",{className:"reg-submit"},n.a.createElement("input",{type:"submit",value:"Login"}),n.a.createElement(s.b,{to:"/register"},"Don't have an account ?")))))}t(102);function j(e){var a=Object(i.g)(),t=Object(m.useRecoilState)(o),r=Object(g.a)(t,2),l=r[0],c=r[1];Object(m.useRecoilValue)(o);return n.a.createElement("nav",{className:"navBar"},n.a.createElement("ul",{className:"logo"},n.a.createElement(s.b,{to:"/"},n.a.createElement("li",null,"Trip",n.a.createElement("span",null,"Seek")))),n.a.createElement("ul",{className:"nav-btn"},e.isLogined?n.a.createElement(n.a.Fragment,null,l.email,n.a.createElement("button",{className:"login-btn",onClick:function(){y.a.remove("token"),c({}),a.push("/")}},"Log Out")):n.a.createElement(n.a.Fragment,null,n.a.createElement("li",null,n.a.createElement(s.b,{to:"/login"}," ",n.a.createElement("button",{className:"login-btn"},"Log in"))),n.a.createElement("li",null," ",n.a.createElement(s.b,{to:"/register"},"  ",n.a.createElement("button",{className:"reg-btn"},"Register")," ")," "))))}var _=function(){var e=Object(m.useRecoilValue)(o),a=y.a.get("token"),t=!(!e||!a)||(localStorage.removeItem("recoil-persist"),y.a.remove("token"),!1);return n.a.createElement(s.a,null,n.a.createElement(j,{isLogined:t}),n.a.createElement(i.d,null,n.a.createElement(i.b,{exact:!0,path:"/"},n.a.createElement(u,null)),n.a.createElement(i.b,{path:"/register"},t?n.a.createElement(i.a,{to:"/"}):n.a.createElement(q,null)),n.a.createElement(i.b,{path:"/login"},t?n.a.createElement(i.a,{to:"/"}):n.a.createElement(O,null))))},S=t(47),k=Object(S.a)(),L=k.RecoilPersist,T=k.updateState;c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(m.RecoilRoot,{initializeState:T},n.a.createElement(L,null),n.a.createElement(_,null))),document.getElementById("root"))},48:function(e,a,t){e.exports=t(103)},53:function(e,a,t){},98:function(e,a,t){}},[[48,1,2]]]);
//# sourceMappingURL=main.f6c2ee89.chunk.js.map